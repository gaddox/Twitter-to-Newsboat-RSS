# Contributing

## Don't

I started writing this script when I didn't know a single thing about Bash, so I've made a lot of design mistakes in the process. If you look closely, you can that everything is a function, this was a mistake I fell for. Bash isn't a "language" that lends well to return-oriented programming and modularity. The next is argument handling. Before I knew how to use case statements, I decided to use one large and bloated decision tree. It's barely comprehensible. Adding a fail-safe for every command block was also pretty dumb, as I learned about the "set" settings that allow for exits if any command fails. `Continue if DEBUG mode is not 0` was only useful for finding all of my errors manually and any to see where my OpenBSD utils were incompatible with GNU Coreutils. It's a legacy function and should be regex'ed away to just `exit 1`.

If you look closely, you'll see a monstrosity of a `sed` chain in `format_page`. Yeah, that's owing to me going headfirst into regex et al. without any foreknowledge of how they work, so I learned it along the way instead of planning it all out. This piece, and arugment handling, are the biggest bloat blocks that'll need to be reworked from the ground up if this script were to ever hope to be maintained. Which they probably will, sometime down the road when the cracks start becoming unignorable, or Twitter's webdevs spearhead a JS-only page-rendering scheme.

Formatting was a bitch. There's absolutely no documentation on Atom, besides the published standards, to which Newsbeuter/Newsboat give a big "fuck you" and spin their own standards on how they should display Atom. The hardest part wasn't parsing the spaghetti of divs residing within Twitter pages, it was the trial and error of messing with Atom tags until Newsbeuter, the picky asshole that it is, decided it was pleased and decided to format the page properly. It's weird, man. Write up an Atom file and imagine in your mind how you think it should be presented. Now run it through Newsbeuter. It comes out as something completely alien to "sane." Links are also another pain point. Their underlines bleed into other text, even if you've closed off their <a> tags, and nested them in separate <p>s and <div>s. I found the only way to do it, was to nest them at the very end of a <p> tag, before an image tag (which also needs to reside right before the </p> tag), otherwise the underline would bleed and break other link tags.

And @SwiftOnSecurity, goddamnit man. You're the only guy, in the 50 or so handles that I've tested, that consistantly finds a way to break formatting. I don't know what it is and I don't care to `set -x` my way through a jungle, into finding it out.

Consider this script deprecated and unmaintained. If it works for you, great, if it doesn't, I recommend you use one of the numerous Python scrappers floating around. The only reason I didn't, was because I didn't want to deal with Python's regex peculiarities.

But besides all that, all-in-all, was a pretty good experience. I'm now in a position where I'm more than comfortable working with bash, and its tools. The mandoc is pretty spiffy, and I find myself staring at it sometimes as a practice of being centered. The one orderly thing, inside a sea of chaos.